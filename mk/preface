# -*- Mode: makefile -*-
#
# Assumes variables:
#    ROOT: root directory of the source tree
#

#
# General properties
#
MAKE=make -j3

#
# Environment options for simp and verb variations
#
SIMP_ENV=CPPFLAGS=-DSIMPLE_EXN
VERB_ENV=CPPFLAGS=-DVERBOSE_EXN

#
# Parameters
#
ifndef INLINE
   INLINE=5
endif

#
# Config
#
ifeq ($(OSTYPE),win32)
   EXE = .exe
endif
ifeq ($(OSTYPE),cygwin32)
   EXE = .exe
endif

ifdef PROFILE
   EXT_LIB=.p.a
   EXT_OBJ=.p.o
   EXT_PROF=.p
else
   EXT_LIB=.a
   EXT_OBJ=.o
   EXT_PROF=
endif

ifndef CAMLLIB
   CAMLLIB = /usr/lib/ocaml
endif

ifndef CAMLP4LIB
   CAMLP4LIB := /usr/lib/camlp4
endif

ifndef MPLIB
   MPLIB=$(ROOT)/lib
endif

#
# OCAML commands
#
ifndef CAMLP4
   CAMLP4 = camlp4o$(EXE)
endif
ifndef OCAMLC
   OCAMLC = ocamlc$(EXE)
endif
ifndef OCAMLCP
   OCAMLCP = $(OCAMLC)
endif
ifndef OCAMLMKTOP
   OCAMLMKTOP = ocamlmktop
endif
ifndef OCAMLOPT
   OCAMLOPT = ocamlopt$(EXE)
endif
ifndef OCAMLLEX
   OCAMLLEX = ocamllex$(EXE)
endif
ifndef OCAMLYACC
   OCAMLYACC = ocamlyacc$(EXE)
endif
ifndef PRLC
   PRLC = $(ROOT)/bin/prlc$(EXE) -lib $(ROOT)/lib
endif

# -*- Mode: makefile -*-
#
# Assumes variables:
#    ROOT: root directory of the source tree
#

#
# User definitions - TERMS, REFINER, MAKE_JOBS
#
include $(ROOT)/mk/config

MP_VERSION=0.5.1

ifndef TERMS
   TERMS=undefined
endif
ifndef REFINER
   REFINER=undefined
endif
ifndef MAKE_JOBS
   MAKE_JOBS=undefined
endif
ifndef SEQ_SET
   SEQ_SET=undefined
endif
ifndef CCC
   CCC=gcc
endif
CC=$(CCC)

#
# Options for simp and verb variations
#
CPPFLAGS=-D$(REFINER)_EXN -DSEQ_SET=$(SEQ_SET)_linear_set

#
# Parameters
#
ifndef INLINE
   INLINE=5
endif

MAKE:=$(MAKE) -j$(MAKE_JOBS)

#
# Config
#
ifeq ($(OSTYPE),win32)
   EXE = .exe
endif
ifeq ($(OSTYPE),cygwin32)
   EXE = .exe
endif

ifdef PROFILE
   EXT_LIB=.p.a
   EXT_OBJ=.p.o
   EXT_PROF=.p
else
   EXT_LIB=.a
   EXT_OBJ=.o
   EXT_PROF=
endif

ifndef CAMLLIB
   CAMLLIB = /usr/lib/ocaml
endif

ifndef CAMLP4LIB
   CAMLP4LIB := /usr/lib/camlp4
endif

ifndef MPLIB
   MPLIB=$(ROOT)/lib
endif

#
# OCAML commands
#
ifndef CAMLP4
   CAMLP4 = camlp4o$(EXE)
endif
ifndef OCAMLC
   OCAMLC = ocamlc$(EXE)
endif
ifndef OCAMLCP
   OCAMLCP = $(OCAMLC)
endif
ifndef OCAMLMKTOP
   OCAMLMKTOP = ocamlmktop
endif
ifndef OCAMLOPT
   OCAMLOPT = ocamlopt$(EXE)
endif
ifndef OCAMLLEX
   OCAMLLEX = ocamllex$(EXE)
endif
ifndef OCAMLYACC
   OCAMLYACC = ocamlyacc$(EXE)
endif
ifndef PRLC
   PRLC = $(ROOT)/bin/prlc$(EXE) -lib $(ROOT)/lib
endif

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
  <META NAME="GENERATOR" CONTENT="Vi">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <TITLE>MetaPRL RW CVS Instructions</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000" LINK="#000099" VLINK="#009900" ALINK="#ff0000">
<H2>MetaPRL Read-Write CVS Access</H2>

<OL>
   <LI>Make sure you have <A HREF="http://www.openssh.com/">OpenSSH</A> (or some other implementation of SSH version 1 protocol) installed on your computer.
   <LI>If you do not have a CVS account set up for you on cvs.metaprl.org:
   <OL>
      <LI>Generate an SSH v.1 RSA key pair (see <a href="http://cvs.metaprl.org:12000/doc/cvs-howto.html#Generating%20RSA%20public/private%20key%20pair%20and">our server HOWTO document</a> for detailed instructions).
      <LI>Send your public key (~/.ssh/identity.pub) and your desired login to <A HREF="mailto:nogin@cs.caltech.edu">Aleksey Nogin (nogin@cs.caltech.edu).</A>
   </OL>

   <LI>Put the following into your <TT>~/.ssh/config</TT> file (if you do not have <TT>~/.ssh/config</TT> file, then create one):

<PRE>Host metaprl-cvs
HostName cvs.metaprl.org
Port 80
FallBackToRsh no
ForwardX11 no
User &lt;your login on cvs.metaprl.org&gt;</PRE>

   <LI>Set environment variable <TT>CVS_RSH</TT> to <TT>ssh</TT>.
   You may want to add this to your <TT>~/.profile</TT> or <TT>~/.cshrc</TT> file.

   <LI>Make sure you are using cvs version &gt;=1.9 (<TT>cvs -v</TT> prints version).

   <LI>To create new working copy:
   <PRE>cvs -d :ext:metaprl-cvs:/cvsroot checkout meta-prl</PRE>
   If for some reason you can not connect to port 80 on metaprl-cvs, try using port 3000 instead.

   <LI>To fix an old repository:
   <OL>
      <LI>Put the following in the <TT>/tmp/fixrep.sh</TT> :

<PRE>#!/bin/sh
echo :ext:metaprl-cvs:/cvsroot &gt; $1/Root
(echo 's|/meta-prl|/--meta-prl-root-dir--|'; echo 's|^.*/--meta-prl-root-dir--|/cvsroot/meta-prl|'; echo w; echo q) | ed $1/Repository</PRE>

      <LI><PRE>chmod 755 /tmp/fixrep.sh</PRE>

      <LI><PRE>find &lt;old repository directory&gt; -type d -name CVS -exec /tmp/fixrep.sh \{\} \;</PRE>
   </OL>
</OL>
</BODY>
</HTML>



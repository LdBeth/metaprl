<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <TITLE>Download MetaPRL</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000" LINK="#000099" VLINK="#009900" ALINK="#ff0000">

<H1 align="center">Installing MetaPRL</H1>

<I>Warning: MetaPRL is currently Beta and could still have some nasty bugs.</I>

<H2>Downloading MetaPRL</H2>

<P>In order to compile and run MetaPRL you are going to need the following packages:</P>

<OL>
  <LI>GNU make. Make 3.77 has a bug and may not work, but make 3.76.1, 3.78.1,
  or later should work fine.
  <LI>Objective Caml: our version contains a small patch to CamlP4 to compile the
      CamlP4 distribution in native code.
  <LI>Ensemble: you need Ensemble only if you want to use the distributed prover.
  <LI>MetaPRL sources.
  <LI>HTMLDOC: you will only need Htmldoc if you want to be able to convert
  MetaPRL documentation into Postscript or PDF format yourself. (Note: <a
  href="http://files.metaprl.org/doc/"><tt>http://files.metaprl.org/doc/</tt></a>
  should already contain the latest version of documentation in Postscript and
  PDF format, so you are unlikely to need Htmldoc).
</OL>

<P>OCaml and Htmldoc are available as source, and RedHat 6.x, 7.x, 8.x and 9
<A HREF="http://www.rpm.org">RPM</A> files for Linux x86. You can get the
<a href="http://rpmfind.net/linux/rpm2html/">rpm2html</a> listing of available RPMs and download them from <A
HREF="http://rpm.nogin.org/ocaml.html">http://rpm.nogin.org/ocaml.html</A>
and <A
HREF="http://rpm.nogin.org/htmldoc.html">http://rpm.nogin.org/htmldoc.html</A>
respectively or a plain listing directly from <A
HREF="http://rpmbin.nogin.org/MetaPRL/">http://rpmbin.nogin.org/MetaPRL/</a>.
If you are going to build OCaml yourself, you can get our patches at <A
HREF="http://cvs.metaprl.org:12000/cvsweb/metaprl/patches/">http://cvs.metaprl.org:12000/cvsweb/metaprl/patches/</A>
(see the <A
HREF="http://cvs.metaprl.org:12000/cvsweb/~checkout~/metaprl/patches/README">README
file</A> for the list of patches you need to apply).</P>

<P>You can download Ensemble from <A HREF="ftp://ftp.cs.cornell.edu/pub/ensemble/">ftp://ftp.cs.cornell.edu/pub/ensemble/</A>.</P>

<P>You should be able to download MetaPRL sources tarball from <A
HREF="http://files.metaprl.org/">http://files.metaprl.org/</A>,
but if you plan to participate in MetaPRL development, you should consider using <A HREF="#cvs">the CVS access</A> to MetaPRL sources.</P>

<P>There is also a Win32 distribution
that we have not placed online yet (if you want it, contact
<A HREF="mailto:jyh@cs.caltech.edu">Jason Hickey</A>). You will
need the Cygnus Systems GNU-Win32 distribution.</P>

<H3><A NAME="cvs">CVS Access to MetaPRL Sources</A></H3>

<p> You can <A TARGET="_top" HREF="http://cvs.metaprl.org:12000/cvsweb/metaprl/">browse the MetaPRL CVS repository</a>.

<P>If you plan any development in MetaPRL or if you want to download the latest
version of MetaPRL, you may consider
using the public CVS repository. This will allow you to have access
to the latest changes in the distribution. The normal
service is read-only, but if you would like to become a contributor
with write access, read the <A HREF="mp-cvs-rw.html">read-write CVS instructions</A>.

<P>The CVS server is on the machine <TT>cvs.metaprl.org</TT>.
First log into the server by running

<BLOCKQUOTE>
  <PRE>% cvs -d :pserver:anoncvs@cvs.metaprl.org:/cvsroot login</PRE>
</BLOCKQUOTE>

The password is <TT>anoncvs</TT>. It will be stored on your computer,
so you only have to run the login command once.

<P>Now you can checkout the distribution by running:</P>

<BLOCKQUOTE>
  <PRE>% cvs -d :pserver:anoncvs@cvs.metaprl.org:/cvsroot checkout MetaPRL</PRE>
</BLOCKQUOTE>

<P>You can find more information on CVS from
the <A HREF="http://www.cvshome.org/docs/">CVS Documentation Pages</A>
and from <A HREF="http://cvsbook.red-bean.com/">The CVS Book</A>.

<H2>Installation and configuration</H2>

<h3>OCaml</h3>

<P>If your are not using
<A HREF="http://rpmbin.nogin.org/MetaPRL/">the provided RPMs</A>, then in order
to install OCaml and CamlP4 download and
unpack the distributions, than apply the <A
HREF="http://cvs.metaprl.org:12000/cvsweb/metaprl/patches/">patches</A> (see
the <A
HREF="http://cvs.metaprl.org:12000/cvsweb/~checkout~/metaprl/patches/README">README
file</A> for the list of patches you need to apply). After that, proceed as described in the
<TT>INSTALL</TT> files in the distributions. If your OS supports pthreads, run OCaml configure
script with <TT>-with-pthread</TT> option in order to get pthreads support in OCaml.
After you have compiled and installed OCaml and Camlp4, go to the OCaml source
tree and copy the following files:
<UL>
<LI><TT>parsing/location.cmi</TT>
<LI><TT>parsing/location.mli</TT>
<LI><TT>parsing/longident.cmi</TT>
<LI><TT>parsing/longident.mli</TT>
<LI><TT>parsing/parsetree.cmi</TT>
<LI><TT>parsing/parsetree.mli</TT>
<LI><TT>typing/typecore.cmi</TT>
<LI><TT>typing/typecore.mli</TT>
</UL> into the OCaml library directory.

<h3>Ensemble</h3>

<P>To install Ensemble, unpack the distribution, and edit the
<TT>&lt;ensemble&gt;/mk/config.mk</TT> file. You will want to
use the Ensemble socket library (not the Unix socket implementation),
then change directories to <TT>&lt;ensemble&gt;/def</TT>, and
run <TT>make</TT>. You can also build the native-code libraries
by running <TT>make</TT> in the <TT>&lt;ensemble&gt;/opt</TT>
directory. More information on Ensemble is available at the
<A HREF="http://www.cs.cornell.edu/Info/Projects/Ensemble/">Ensemble
Home Page</A>.</P>

<h3>MetaPRL</h3>

<P>To install MetaPRL, unpack the distribution into some directory
<TT>&lt;metaprl&gt;</TT> and build the distribution with these steps:</P>

<BLOCKQUOTE>
<TT>% cd &lt;metaprl&gt;</TT><BR>
<TT>% make opt</TT> &nbsp; (builds native code, you need pthreads to be
supported by your OS and compiled into OCaml)<BR>
or<BR>
<TT>% make all</TT> &nbsp; (builds bytecode)
</BLOCKQUOTE>

<P>After you run <TT>make</tt> for the first time, it will create the
<tt>mk/config</tt> file (as well as an empty <TT>mk/config.local</TT> file)
that you will need to customize, before the rest of the <TT>make</TT> process
can go through. The <tt>mk/config</tt> file is self-documenting.</P>

<P> If you are using Ensemble, set <TT>ENSROOT=&lt;root of the ensemble
source tree&gt;</TT> in the <TT>mk/config</TT> file.
</P>

<P>You may need to set variables <TT>CAMLLIB</TT> and <TT>CAMLP4LIB</TT> to
point to the directories where you have installed OCaml and Camlp4 files. You
can either set them in the <TT>mk/config.local</TT> file, for example:<br>
<code>CAMLLIB=/usr/lib/ocaml<br>
CAMLP4LIB=/usr/lib/ocaml/camlp4</code><br>
or in the environment. If a variable is set in both,
<TT>mk/config.local</tt> takes precedence over the environment.
The defaults are <TT>/usr/lib/ocaml</TT> and <TT>/usr/lib/ocaml/camlp4</TT>
respectively.</P>

<P>To run the native code version of MetaPRL in an <tt>xterm</tt> with the correct fonts, use
<TT>&lt;metaprl&gt;/editor/ml/mpxterm</TT> (normal fonts) or
<TT>&lt;metaprl&gt;/editor/ml/mpxterm-large</TT> (larger font).</P>

<P>If starting MetaPRL by hands (or from Emacs), the programs to use are
<TT>&lt;metaprl&gt;/editor/ml/mpopt</TT> (native code) and
<TT>&lt;metaprl&gt;/editor/ml/mptop</TT> (bytecode).  You will need to use a
Unicode (<tt>iso10646-1</tt>) font to be able to interact with some sense. We
currently recommend using the
<TT>-misc-fixed-medium-r-normal--15-140-75-75-c-90-iso10646-1</TT> font
(wihich is what <TT>mpxterm</TT> script uses), but in some cases another font
may work better.</P>

<P>That's it. To navigate the MetaPRL logics and programs, you will need to
read the <TT>&lt;metaprl&gt;/editor/ml/QUICKSTART</TT> file or the <A
TARGET="_top" HREF="user-guide/default.html">User Guide</A>.  To start
developing new code, read the <A TARGET="_top"
HREF="developer-guide/default.html">Developer Guide</A>.</P>

<h3>Htmldoc</h3>

<P> If you want to use Htmldoc, download it from
<A HREF="http://www.easysw.com/htmldoc/">http://www.easysw.com/htmldoc/</A></P>

</BODY>
</HTML>
